"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[79792],{308:(e,t,r)=>{r.d(t,{H:()=>c});var a=r(676534),o=r(911052),n=r(901610),s=r(524335);let i=e=>{let{assetType:t,currency:r,productName:i}=e,{getExperiment:d}=(0,s.U)();return(0,n.y)({productName:i,assetType:t})&&d(a.f.indiaPriceTest).groupName===o.IS?o.Uj:r};var d=r(233661),l=r(137197);let u=e=>{let{assetType:t,currency:r,productName:o}=e,{getExperiment:n}=(0,s.U)();return(0,l.m)({productName:o,assetType:t})&&n(a.f.canadaPriceTest).groupName===d.IS?d.BJ:r},c=e=>{let{assetType:t,currency:r,productName:a}=e,o=i({currency:r,assetType:t,productName:a}),n=u({currency:r,assetType:t,productName:a});return n!==r?n:o!==r?o:r}},3353:(e,t,r)=>{r.d(t,{J:()=>c});var a=r(532850),o=r(360662),n=r(50042),s=r(655515),i=r(119349),d=r(981278),l=r(455729);let{shutterstockBaseUrl:u}=(0,s.K)(),c=e=>{let{couponCode:t,displayInlineCancellationFlow:r,additionalQueryParams:s={}}=e,c=(0,d.useRouter)(),p=(0,o.Q)(),m=!!p?.current?.isPeacock;return(0,l.useCallback)(e=>{let{orderId:o}=e,d=(0,i.BF)({language:c.locale,baseUrl:u,pathname:(0,n.DG)({queryParams:{orderId:o,...s,...c?.query||{},...m&&{isCreativeAiOrder:"true"},...t?{[a.m]:t,[a.AW]:t}:{},...r&&{display:"inlineCancellationFlow"}}})});window.location=d},[t,m,c,r,s])}},137197:(e,t,r)=>{r.d(t,{m:()=>c});var a=r(581298),o=r(430091),n=r(813400),s=r(315888),i=r(813631),d=r(233661);let l=e=>{let{assetType:t,productName:r,utmMedium:a,region:o,inUnlimitedExperience:l}=e,u=!r||[s.keR,s.lcL,...s.gnm,...s.BfY].includes(r),c=!t||t===i.W1,p=d.rK.includes(a??"");return!!(o===n.u3&&!p&&!l&&u&&c)};var u=r(184905);let c=e=>{let{productName:t,assetType:r}=e,n=(0,u.H)(),{region:s}=(0,a.Y)(),{utmMedium:i}=(0,o.Y)();return l({productName:t,utmMedium:i,inUnlimitedExperience:n,region:s,assetType:r})}},236599:(e,t,r)=>{r.d(t,{X:()=>w});var a=r(648973),o=r(969185),n=r(705992),s=r(532850),i=r(581298),d=r(664029),l=r(935271),u=r(302168),c=r(559044),p=r(3353),m=r(346504),y=r(377981),h=r(819254),C=r(524335),b=r(455729);let f=e=>{let{asset:t,assetSize:r,couponCode:f,license:N,products:g,productId:v,productOverride:w,productType:k=s.PZ,setCreateOrderStatus:P,setIsInvalidCoupon:O}=e,{region:_}=(0,i.Y)(),I=(0,h.o)(),[A,x]=(0,b.useState)(!1),D=(0,b.useMemo)(()=>w??{...(0,u.eO)(g,v)},[w,v,g]),U=(0,m.wb)({prices:D?.prices??{}}),{checkGate:E}=(0,C.U)(),S=E(o.M5),T=(0,b.useCallback)(e=>{let t={component:"useCreateAnonymousOrder.ts",errorCode:e.code,errorStatus:e.status,errorDetail:e.detail,errorMessage:e.message,errorStack:e.stack||"useCreateAnonymousOrder",errorTitle:e.title,msg:"CON-21: Anonymous order creation failed",referrerPath:window.location.pathname,referrerQuery:window.location.search,anonymousId:I};window.NREUM?.noticeError?.(e,t)},[I]),M=(0,p.J)({couponCode:f}),R=(0,y.h)(),[L,F]=(0,b.useState)({status:"",error:void 0});return{createOrderHandler:(0,b.useCallback)(async()=>{try{P?.({status:"",error:void 0}),F({status:"",error:void 0}),x(!0);let e=t?{assets:[{asset:t,selectedAssetSize:(0,d.aZ)({assetType:(0,c.f0)(t),assetSize:r})}]}:{},o=[];o.push({...e,product:D,productType:k});let{data:s}=await (0,l.fS)({country:_,currency:U,orderItems:o,couponCode:f,license:N,isClickToCancelARGateEnabled:S,configs:{headers:{[n.DF]:I,[n.s4]:n.o}}});P?.({status:a.qO,error:void 0}),F({status:a.qO,error:void 0}),x(!1),M({orderId:`shutterstock.${s.id}`}),R({actionName:"CON-64 - anonymous order creation success",customAttributes:{productName:D.name,productType:k,country:_,currency:U,assetType:(0,c.f0)(t),assetSize:r,license:N}}),x(!1)}catch(e){P?.({status:a.Nz,error:e}),F({status:a.Nz,error:e}),x(!1),e?.detail?.toLowerCase()===s.s_&&O?.(!0),T(e)}},[I,t,r,f,_,U,S,N,D,k,R,M,T,P,O]),isCreateOrderInProgress:A,product:D,orderStatus:L}};var N=r(282881),g=r(30721),v=r(911449);let w=e=>{let{assets:t=[],cartItemsCount:r,isCartOrder:a,...o}=e,n=(0,g.i9)(),{checkGate:s}=(0,C.U)(),i=(0,N.N)({assets:a?t:void 0,product:a?void 0:o.productOverride,checkGate:s}),d=r&&r>15,l=(0,b.useMemo)(()=>({...o,asset:t[0]?.mediaItem||o.asset}),[o,t]),u=(0,v.s)(l),c=f(l),p=u.isCreateOrderInProgress||c.isCreateOrderInProgress||e.standardMultiOrderHookResult?.isCreateOrderInProgress||e.anonymousMultiOrderHookResult?.isCreateOrderInProgress,m=(0,b.useCallback)(t=>{let{isEligibleForAnonCheckout:r}=t;return n||!r?a?e.standardMultiOrderHookResult:u:a?d||i?e.standardMultiOrderHookResult:e.anonymousMultiOrderHookResult:i?u:c},[n,a,i,c,u,d,e.anonymousMultiOrderHookResult,e.standardMultiOrderHookResult]);return{getCreateOrderHandler:(0,b.useCallback)(e=>{let{isEligibleForAnonCheckout:t=!1}=e;return{createOrderHandler:m({isEligibleForAnonCheckout:t}).createOrderHandler}},[m]),isCreateOrderInProgress:p,hasActivePromos:i,cartSizeExceedsAnonymousLimit:d,createOrderHandlerLoading:u.createOrderHandlerLoading}}},262139:(e,t,r)=>{r.r(t),r.d(t,{BuyAndDownloadButton:()=>w,getAnalyticsLabel:()=>v});var a=r(406029),o=r(464839),n=r(215075),s=r(926114),i=r(291753),d=r(517596),l=r(811401),u=r(513372),c=r(727326),p=r(532850),m=r(670283),y=r(882431),h=r(236599),C=r(461266),b=r(568880),f=r(455729);let N=(0,r(807703).n9)()(e=>{let{tokens:{spacing:t}}=e;return{buttonProgress:{position:"absolute"},downloadButton:{marginTop:t.base}}}),g=e=>{let{t}=e;return{buyAndDownload:t("activation-drawers:pricing_checkout_download_label")}},v=e=>{let{product:t,selectedProductLicenseType:r,hasActiveMembershipSub:a}=e,{license:o}=r,{name:n}=t;if(o&&n){let e=`${c.lnH} - ${o}License - ${n}`;return`${a?`${e} - ${i.jQ}`:e}`}return c.lnH},w=e=>{let{asset:t,assetSize:r,couponCode:w="",isDisabled:k=!1,product:P,productType:O=p.PZ,selectedProductLicenseType:_=C.vB,setCreateOrderStatus:I=C.lQ,selectedShadowsOption:A,vatNumber:x,eligibilityData:D=C.vB,labelText:U,membershipProps:E=C.vB}=e,{isEligibleForEnhanceLicensingSingleAsset:S}=(0,d.r)(),{classes:T}=N(),[M,R]=(0,f.useState)(!1),{t:L,ready:F}=(0,b.Bd)(s.sVY),B=g({t:L}),{license:z}=_,{hasActiveMembershipSub:H}=E,Y={orderFlow:y.Y.LICENSING_DRAWER,asset:t,assetSize:r,couponCode:w,productOverride:P,productType:O,vatNumber:x,setCreateOrderStatus:I,selectedShadowsOption:A,license:z,isLicenseDrawer:!0,eligibilityData:D},j=(0,m.T)(),{getCreateOrderHandler:$,isCreateOrderInProgress:J}=(0,h.X)(Y),Z=J||!F||k||!M,G=S?c.Bni:v({product:P,selectedProductLicenseType:_,hasActiveMembershipSub:H}),V=H?i.DB:U;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.l,{asset:t,isTermsChecked:M,setTermsCheckbox:R}),(0,a.jsxs)(u.$n,{"aria-label":V||B.buyAndDownload,"data-automation":`${V||c.lnH}_button`,variant:"contained",color:"secondary",onClick:()=>{let{isEligibleForCon64AnonymousCheckoutExperiment:e}=j(),{createOrderHandler:t}=$({isEligibleForAnonCheckout:e});t()},fullWidth:!0,disabled:Z,labelTrack:G,className:T.downloadButton,children:[J&&(0,a.jsx)(o.A,{color:"inherit",size:24,className:T.buttonProgress}),V||(F?B.buyAndDownload:(0,a.jsx)(n.A,{variant:"text",width:"100%"}))]})]})}},282881:(e,t,r)=>{r.d(t,{N:()=>s});var a=r(315888),o=r(969185);let n=[{condition:e=>{let{assets:t,checkGate:r}=e;return(t?.some(e=>{let{product:t}=e;return t?.name===a.rVp})??!1)&&(r?.(o.gx)??!1)}},{condition:e=>{let{product:t,checkGate:r}=e;return t?.name===a.rVp&&(r?.(o.gx)??!1)}},{condition:e=>{let{product:t}=e;return!!t?.promotions}}],s=e=>{let{assets:t,product:r,checkGate:a}=e;return n.some(e=>e.condition({assets:t,product:r,checkGate:a}))}},291753:(e,t,r)=>{r.d(t,{DB:()=>u,TE:()=>m,a_:()=>c,ay:()=>i,cy:()=>l,e7:()=>d,jQ:()=>p,lY:()=>o,rY:()=>s,vB:()=>n});var a=r(315888);let o="LICENSING",n="LOADING",s="PURCHASING",i="none",d={[a.zWM]:2,[a.InX]:5,[a.gtC]:25,[a.W_1]:2,[a.HCH]:5,[a.xh8]:25},l="Download for free",u="Download",c="Tier100",p="NonTier100",m="eligibilityErrorNoEligibility"},346504:(e,t,r)=>{r.d(t,{JA:()=>b,Up:()=>y,Z0:()=>h,bV:()=>N,dV:()=>C,eb:()=>f,kI:()=>m,wb:()=>c});var a=r(9549),o=r(485650),n=r(831664),s=r(581298),i=r(308),d=r(302168),l=r(198795),u=r(455729);let c=e=>{let{prices:t,name:r}=e,{currencyData:{currency:o=a.OS}}=(0,s.Y)(),n=(0,i.H)({productName:r,currency:o});return(0,d.zn)({prices:t,localeCurrency:n})},p=e=>{let{basePrice:t,pricePerSeat:r,seatCount:a}=e;return t?t+r*a:NaN},m=e=>{let{product:t}=e,{prices:r={},pricesPerSeat:a={},seatCount:o,downloadCredits:n,allotmentCredits:s,commitmentLength:i,name:d}=t,u=c({prices:r,name:d}),m=r[u?.toLowerCase()]??NaN,y=a[u?.toLowerCase()]??NaN,h=m,C=s||n;return y&&o&&(h=p({basePrice:m,pricePerSeat:y,seatCount:o})),(0,l.f)(h/(C&&1===i?12*C:C||1),u)??void 0},y=e=>{let{product:t,promotion:r=0}=e,{prices:a={},pricesPerSeat:o={},seatCount:n,name:s}=t||{},i=c({prices:a,name:s}),d=a[i?.toLowerCase()]??NaN,u=o[i?.toLowerCase()],m=d;return r>0&&(m=Math.round(d*(1-r))),u&&n&&(m=p({basePrice:d,pricePerSeat:u,seatCount:n})),(0,l.f)(m,i)},h=e=>{let{activeTab:t,productGroup:r,productToCompare:a=n.XN}=e,{prices:o}={prices:{}},s=c({prices:o}),{products:i={}}=r,d=i[t],u=12*(d?.[a]?.prices?.[s?.toLowerCase()]??NaN)-(d?.[n.Ww]?.prices?.[s?.toLowerCase()]??NaN),p=(0,l.f)(u,s);return u>0?p:null},C=e=>{let{price:t,product:r}=e,{prices:a,name:o}=r,n=c({prices:a,name:o}),s=t||a[n?.toLowerCase()]||0;return(0,l.f)(s,n)},b=e=>{let{product:t,downloadsPerMonth:r,discountPercentage:a=0,selectedProductLicenseType:n=""}=e,s=c({prices:t?.prices??{},name:t?.name}),{pricePerPaymentInterval:i,pricePerMonth:p,pricePerAsset:m,pricePerAssetDiscounted:y,priceDiscounted:h}=(0,u.useMemo)(()=>{let e=(0,d.f8)({product:t??{}}),i=(0,d.Eu)({product:t}),l=n===o.ZI1,u=2*!["KRW","JPY"].includes(s),c=(0,d.Fj)({product:t??{}}),p=c&&!i?12:1,m=t?.prices?.[s.toLowerCase()]??NaN,y=m-m/100*a,h=c?(m/12).toFixed(u):m,C=l?(t?.allotmentCredits||0)/20:t?.allotmentCredits??NaN,b=(m/p/((e?C:t?.allotmentCredits)??NaN)).toFixed(u),f=a?(y/p/(t?.allotmentCredits??r??NaN)).toFixed(u):b;return{priceDiscounted:y,pricePerMonth:h,pricePerAsset:b,pricePerAssetDiscounted:f,pricePerPaymentInterval:m}},[s,r,t,a,n]);return{pricePerAsset:m,formattedPricePerPaymentInterval:(0,l.f)(i,s),formattedPricePerMonth:(0,l.f)(p,s),formattedPricePerAsset:(0,l.f)(m,s),formattedPricePerAssetDiscounted:(0,l.f)(y,s),formattedPriceDiscounted:(0,l.f)(h,s)}},f=e=>{let{product:t,singleClipProduct:r}=e,{prices:a,allotmentCredits:o}=t,n=c({prices:a}),s=a[n.toLowerCase()]??NaN,i=r?.prices?.[n.toLowerCase()]??NaN,d=(s/(o??NaN)).toFixed(2),u=((i-parseFloat(d))*(o??NaN)).toFixed(0);return{formattedPackagePrice:(0,l.f)(s,n),formattedPricePerAsset:(0,l.f)(d,n),formattedSaveAmount:(0,l.f)(u,n)}},N=e=>{let{prices:t={},commitmentRemaining:r=0}=e,a=c({prices:t}),o=t[a?.toLowerCase()]??NaN;return{monthlyPrice:(0,l.f)(o,a),totalRemainingPrice:(0,l.f)(o*r,a)}}},426774:(e,t,r)=>{r.d(t,{l:()=>o});var a=r(651642).Buffer;let o=e=>{let t=JSON.stringify(e);return a.from(t).toString("base64")}},517596:(e,t,r)=>{r.d(t,{Y:()=>o,r:()=>n});var a=r(455729);let o=(0,a.createContext)({isEligibleForEnhanceLicensingSingleAsset:!1}),n=()=>(0,a.useContext)(o)},670283:(e,t,r)=>{r.d(t,{T:()=>i});var a=r(676534),o=r(30721),n=r(524335),s=r(455729);let i=()=>{let{getExperiment:e}=(0,n.U)(),t=(0,o.i9)();return(0,s.useCallback)(()=>{if(t)return{isEligibleForCon64AnonymousCheckoutExperiment:!1};let r=e(a.f.signUpOnCheckout);return{isEligibleForCon64AnonymousCheckoutExperiment:1===Number(r?.get("variant",0))}},[e,t])}},739628:(e,t,r)=>{r.r(t),r.d(t,{BuyAndDownloadButton:()=>g});var a=r(406029),o=r(464839),n=r(513372),s=r(485650),i=r(532850),d=r(808059),l=r(926114),u=r(568880);let c=e=>{let{price:t,resolution:r}=e,{t:a}=(0,u.Bd)(l.sVY);return a("video_otp_primary_cta_dynamic_label",{PRICE:t,RESOLUTION:r?.toUpperCase()})};var p=r(670283),m=r(882431),y=r(559044),h=r(236599),C=r(346504),b=r(30721),f=r(52492);let N=(e,t,r)=>(0,y.$9)(e)?s.rTe:[s.ZI1,s.$am].includes(r?.license||"")?s.PtZ[t]:s.or1[t],g=e=>{let{asset:t,assetSizeStateId:r,assetType:s,buttonConfig:l={showIcon:!0,variant:"contained",color:"secondary",style:{marginBottom:"8px"}},clickAnalyticsLabel:u,clickAnalyticsLabelMap:y,label:g,orderFlow:v=m.Y.UNLIMITED_CONVERSION_PANEL,product:w,productStateId:k,setStateOnLoggedOutClick:P,termsCheckboxStateId:O,shouldUseSignupModal:_=!0,showDynamicLabelForOtpCta:I=!1}=e,A=(0,b.i9)(),{setStates:x}=(0,d.h6)(),D=(0,d.Cw)(r),U=(0,d.Cw)(O??"")??!0,E=(0,d.Cw)(k??"")??w,S=N(t,s,E),T=(0,C.Up)({product:E}),M=c({resolution:D?.resolution,price:T}),R=(0,p.T)(),L={orderFlow:v,productType:i.PZ,asset:t,productOverride:E,shouldForceAsset:!0,assetSize:D,license:S},{getCreateOrderHandler:F,isCreateOrderInProgress:B,createOrderHandlerLoading:z}=(0,h.X)(L),H=B||z||!U,Y=I?M:g;return(0,a.jsxs)(n.$n,{"aria-label":Y,disabled:H,fullWidth:!0,onClick:()=>{let{isEligibleForCon64AnonymousCheckoutExperiment:e}=R(),{createOrderHandler:t}=F({isEligibleForAnonCheckout:e});A||!_||e?t():x(P)},labelTrack:y?.[E?.name||""]||u,variant:l.variant,color:l.color,style:l.style,children:[B&&(0,a.jsx)(o.A,{color:"inherit",size:24,style:{position:"absolute"}}),l.showIcon&&(0,a.jsx)(f.Download,{style:{padding:"2px",marginRight:"4px"}}),Y]})}},808059:(e,t,r)=>{r.d(t,{kN:()=>l,h6:()=>p,Cw:()=>c});var a=r(406029),o=r(467889);let n=e=>(0,o.y)()(t=>({...e,actions:{setStates:e=>t(t=>({...t,...e})),setState:(e,r)=>t(t=>({...t,[e]:r}))}}));var s=r(455729),i=r(565317);let d=(0,s.createContext)(null),l=e=>{let{children:t,initialState:r}=e,[o]=(0,s.useState)(()=>n(r));return(0,a.jsx)(d.Provider,{value:o,children:t})},u=e=>{let t=(0,s.useContext)(d);if(!t)throw Error("useConversionPanelStore must be used within CounterStoreProvider");return(0,i.P)(t,e)},c=e=>u(t=>t[e]),p=()=>u(e=>e.actions)},811401:(e,t,r)=>{r.d(t,{l:()=>p});var a=r(406029),o=r(571024),n=r.n(o);let s=n()(()=>r.e(44103).then(r.bind(r,639846)).then(e=>({default:e.EditorialTerms})),{loadableGenerated:{webpack:()=>[639846]},ssr:!1});var i=r(215075);let d=n()(()=>r.e(56895).then(r.bind(r,725831)).then(e=>({default:e.GeneratedAssetTerms})),{loadableGenerated:{webpack:()=>[725831]},ssr:!1,loading:()=>(0,a.jsx)(i.A,{height:"126px",variant:"rectangular",sx:{marginTop:"8px"}})});var l=r(495060),u=r(580030),c=r(455729);let p=e=>{let{asset:t,isTermsChecked:r=!1,setTermsCheckbox:o,showContributorDetails:n=!0}=e,i=(0,u.OK)(t),p=(0,l.iu)(t);return((0,c.useEffect)(()=>{i||p||o(!0)},[i,p,o]),i)?(0,a.jsx)(s,{asset:t,isTermsChecked:r,onCheckboxChange:o,showContributorDetails:n}):p?(0,a.jsx)(d,{isTermsChecked:r,onCheckboxChange:o}):null}},813400:(e,t,r)=>{r.d(t,{AV:()=>o,BR:()=>p,CU:()=>b,GS:()=>a,J8:()=>f,Ji:()=>l,L2:()=>d,ON:()=>c,R8:()=>n,RD:()=>u,TJ:()=>y,pp:()=>m,u3:()=>h,ye:()=>C,zm:()=>s,zz:()=>i});let a={country:"country",address1:"address1",address2:"address2",city:"city",state:"state",zip:"zip"},o={ccname:"ccname",bin:"bin",lastFour:"lastFour",brand:"brand",encryptedCardNumber:"encryptedCardNumber",encryptedCardType:"encryptedCardType",encryptedExpiryMonth:"encryptedExpiryMonth",encryptedExpiryYear:"encryptedExpiryYear",encryptedSecurityCode:"encryptedSecurityCode"},n={...a,name:"name"},s={ddname:"ddname",ddiban:"ddiban",ddbic:"ddbic"},i="Adyen3DSAuth",d="credit_card",l="direct_debit",u="sepa_direct_debit",c="paypal",p=/^\d{5}(-\d{4})?$/,m="rejected:Declined: CVC Declined",y={[d]:o,[l]:s},h="CA",C=[h],b="shutterstock",f={ORGANIZATION:"organization",CUSTOMER:"customer"}},901610:(e,t,r)=>{r.d(t,{y:()=>l});var a=r(581298),o=r(430091),n=r(315888),s=r(813631),i=r(911052);let d=e=>{let{assetType:t,productName:r,utmMedium:a,region:o}=e,d=!r||[n.keR,n.lcL,...n.gnm,...n.BfY].includes(r),l=!t||t===s.W1,u=i.rK.includes(a??"");return!!(o===i.r4&&!u&&d&&l)},l=e=>{let{productName:t,assetType:r}=e,{region:n}=(0,a.Y)(),{utmMedium:s}=(0,o.Y)();return d({productName:t,utmMedium:s,region:n,assetType:r})}},901897:(e,t,r)=>{r.d(t,{$:()=>d});var a=r(487519),o=r(287307),n=r(531950),s=r(884378),i=r(12482);let d=function(){let{queryParams:e={},shouldFetch:t=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,a.uy)({queryParams:e}).formattedUrl;return(0,i.I)((0,o.Rt)({enabled:t,queryKey:["getUserPaymentProfiles",r],queryFn:()=>n.Bn.get(r).then(e=>(0,s.A)(e.data))}))}},911052:(e,t,r)=>{r.d(t,{IS:()=>o,Uj:()=>a,r4:()=>n,rK:()=>s});let a="INR",o="Test",n="IN",s=["cpc","acq_display","email","affiliate"]},911449:(e,t,r)=>{r.d(t,{s:()=>B});var a=r(315888),o=r(648973),n=r(754725),s=r(969185),i=r(705992),d=r(353420),l=r(532850),u=r(581298),c=r(664029),p=r(935271),m=r(302168),y=r(559044),h=r(903074),C=r(30721);let b=e=>{let{asset:t,productName:r,isBogoPromotionActive:o=!1}=e,n=(0,h.J)(),s=(0,C.i9)(),i=(0,y.sY)(t);return(n?.isFBA||!s)&&!i&&o&&r===a.uyi};var f=r(426774),N=r(529862),g=r(262593),v=r(901897),w=r(3353),k=r(346504),P=r(120638),O=r(293733),_=r(377981),I=r(819254),A=r(631549),x=r(586694),D=r(323982),U=r(524335),E=r(962316);let{NODE_CONFIG_ENV:S}=r(929143).env,T=()=>{let e=(0,E.NF)()?"production":"qa";switch(S||e){case"dev":return"65021";case"qa":return"12424";case"production":return"14156";default:return"NO_ENV_DEFINED"}};var M=r(811407),R=r(946887),L=r(981278),F=r(455729);let B=e=>{let{products:t,asset:r,assetSize:h,couponCode:E,productId:S,productType:B=l.PZ,productOverride:z,seatCount:H,setCreateOrderStatus:Y,setIsInvalidCoupon:j,vatNumber:$,license:J,isLicenseDrawer:Z=!1,preset:G,eligibilityData:V={},existingUserRedirectPath:q,selectedShadowsOption:K,shouldForceAsset:W=!1,subscriptionIdentifier:Q,cancellationReason:X,additionalCheckoutQueryParams:ee,orderFlow:et,checkoutAction:er}=e,{region:ea}=(0,u.Y)(),{isIndiaRegion:eo}=(0,O.Z)(),{data:en}=(0,C.rA)(),{data:es}=(0,A.J)(),ei=(0,C.i9)(),ed=(0,I.o)(),[el,eu]=(0,F.useState)(!1),[,ec]=(0,D.p)(r)||[],{eligibilityCurrency:ep,debitableIdentifier:em}=V,ey=(0,x.Jz)()||(0,M.vb)(),{checkGate:eh}=(0,U.U)(),eC=eh(s.M5),eb=(0,F.useMemo)(()=>z??{...(0,m.eO)(t,S),...H?{seatCount:H}:{}},[z,S,t,H]),ef=eb?.id,{asPath:eN}=(0,L.useRouter)(),eg=(0,k.wb)({prices:eb?.prices??{},name:eb?.name}),{data:ev}=(0,v.$)({shouldFetch:!!ei}),ew=b({asset:r,productName:eb.name}),ek=E||eb.couponCode,eP=(0,P.Rt)({cookies:void 0,signUpView:void 0,queryParams:{landing_page:(0,g.$)({couponCode:ek,productId:ef,vatNumber:$,seatCount:eb?.seatCount,doNotRedirect:!0,asset:eo||W?r:void 0,existingUserRedirect:q||ec,license:J,additionalGenerateCheckoutParams:ee,promotions:eb?.promotions}),...G&&{preset:G}}}),eO=(0,F.useCallback)(()=>{window&&(R.A.set(n.uc,eN),window.NREUM?.addPageAction?.("UP3-1623 assign loggedOutHandler authRedirectPath to href",{...window.location||{},asPath:eN,authRedirectPath:eP}),window.location.href=eP)},[eN,eP]),e_=(0,p.Z5)({paymentProfiles:ev}),eI=(0,F.useCallback)(e=>{let t={createTime:en?.createTime,component:"useCreateOrder.js",errorCode:e.code,errorStatus:e.status,errorDetail:e.detail,errorMessage:e.message,errorStack:e.stack||"useCreateOrder",errorTitle:e.title,impersonatorId:es?.impersonatorId,msg:"UP1-2650 Order creation failed",organizationId:en?.organizationId,referrerPath:window.location.pathname,referrerQuery:window.location.search,userId:en?.id,username:en?.username,isLicenseDrawer:Z};window.NREUM?.noticeError?.(e,t)},[es,en,Z]),eA=(0,w.J)({additionalQueryParams:{...ee,...er&&{checkoutAction:er}},couponCode:ek}),ex=(0,_.h)(),[eD,eU]=(0,F.useState)({status:"",error:void 0}),eE=(0,F.useCallback)(async()=>{try{if(Y?.({status:"",error:void 0}),eU({status:"",error:void 0}),eu(!0),ev){let e=r?{assets:[{asset:r,selectedAssetSize:(0,c.aZ)({assetType:(0,y.f0)(r),assetSize:h})}]}:{},t=[];t.push({...e,product:eb,productType:B});let n=eb.name===a.rVp,l=eh(s.gx),u=n&&l?(0,f.l)(d.ju[a.rVp]):void 0;null!=X&&null!=Q&&t.push({product:{id:T(),type:"products"},cancellationReason:X,subscriptionIdentifier:Q});let{headers:m}=(0,N.H)({trackingId:ey,headers:{[i.DF]:ed}})||{},{data:C}=await (0,p.fS)({country:ea,currency:ep||eg,paymentProfileId:e_?.paymentId,orderItems:t,selectedShadowsOption:K,vatNumber:$,couponCode:ek,promotions:eb?.promotions??u,license:J,debitableIdentifier:em,configs:{headers:m},isEligibleForUnlimitedBogoPromotion:ew,isClickToCancelARGateEnabled:eC,isFootageSelect:!!r&&(0,y.ex)(r)});ex({actionName:"convert - order creation success",customAttributes:{productName:eb.name,productType:B,country:ea,currency:ep||eg,assetType:(0,y.f0)(r),assetSize:h,license:J,isLicenseDrawer:Z,orderFlow:et,couponCode:ek,orderId:C.id}}),Y?.({status:o.qO,error:void 0}),eU({status:o.qO,error:void 0}),eu(!1),eA({orderId:C.id})}eu(!1)}catch(e){Y?.({status:o.Nz,error:e}),eU({status:o.Nz,error:e}),eu(!1),e?.detail?.toLowerCase()===l.s_&&j?.(!0),eI(e)}},[Y,ev,r,h,eb,B,eh,X,Q,ey,ed,ea,ep,eg,e_?.paymentId,K,$,ek,J,em,ew,eC,ex,Z,et,eA,eI,j]);return{createOrderHandler:ei?eE:eO,isCreateOrderInProgress:el,product:eb,orderStatus:eD,createOrderHandlerLoading:ei&&!ev}}},935271:(e,t,r)=>{r.d(t,{NM:()=>_,fS:()=>P,Z5:()=>v});var a=r(487519),o=r(914689),n=r(315888),s=r(392684),i=r(532598),d=r(338436),l=r(813631),u=r(532850),c=r(398426);let p=function(e){let t,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],[a]=e,{media:o,...s}=a,i=o?.[0]||{};switch(i.type){case l.W1:t=`${n.lcL}-var-0004`;break;case l.FY:t=c.eJ;break;case l.M9:t=c.Xs;break;case l.G_:t=n.t8m[i.size],r&&(t=n.fV_);break;default:return e}return[{...s,media:[]},{product:{id:t,type:u.Uy},media:[i]}]};var m=r(353420),y=r(426774);let h=()=>(0,y.l)(m.ju[n.uyi]);var C=r(559044),b=r(531950),f=r(884378);let N="production"!==r(929143).env.NODE_CONFIG_ENV,g=e=>{switch(e.paymentMethod){case o.L2:return{paymentId:e.id,expirationMonth:e?.creditCard?.expMonth,expirationYear:e?.creditCard?.expYear,maskedNumber:e?.creditCard?.maskedNumber,cardType:e?.creditCard?.type,isDefault:e.isDefault,paymentMethod:e.paymentMethod,businessUnit:e.businessUnit};case o.RD:return{paymentId:e.id,bic:e?.sepaDirectDebit?.bic,maskedIBAN:e?.sepaDirectDebit?.maskedIban,isDefault:e.isDefault,paymentMethod:e.paymentMethod,businessUnit:e.businessUnit};case o.ON:return{paymentId:e.id,isDefault:e.isDefault,paymentMethod:e.paymentMethod,businessUnit:e.businessUnit,email:e.email};default:return null}},v=e=>{let{paymentProfiles:t=[]}=e;return Array.isArray(t)&&0!==t.length?g(t.find(e=>!0===e.isDefault)||t[0]):null},w=e=>{let{orderItems:t=[],license:r,country:a="",debitableIdentifier:c,selectedShadowsOption:p,isClickToCancelARGateEnabled:m=!1}=e;return t.map(e=>{let{product:{id:t,eligibleForRebilling:y,seatCount:h,name:b=""}={},productType:f,assets:N,paymentMethod:g,subscriptionIdentifier:v,cancellationReason:w,cancellationReasonName:k}=e,P=v&&w?{subscription_identifier:v,cancellation_reason:w,...k&&{cancellation_reason_name:k}}:{},O=[];return h&&(P.seat_count=h),g?.type!==o.gU&&(P.subscription_id=g?.id),N?.length&&(O=N.map(e=>{let{asset:t,selectedAssetSize:a}=e,o=(0,C.Ub)(t),n=(0,C.OJ)(t);return{type:o,id:t.id,license:r,...n&&{format:d.mx,size:d.mx,headline:t.title},...a?.size&&{size:a.size},...a?.format&&{format:a.format},...o===l.W1&&t.imageType===l.m$&&{angle:t.angle||s.R,content_provider:l._Y,...a?.format!==i.yC&&{include_shadows:"on"===(p||"on").toLocaleLowerCase()}}}})),P.auto_renewal=y&&f===u.PZ&&!n.F7K.includes(a)&&!n.KGB.includes(b),P.debitable_identifier=c,m&&n.Khw.includes(b)&&(P.auto_refill=!1),{product:{id:t,type:f||u.Uy},...O&&{media:O},...Object.keys(P).length>0&&{meta:P}}})},k=e=>{let{currency:t,country:r,paymentProfileId:a,items:o,couponCode:n,vatNumber:s,promotions:i}=e;return{data:{type:"orders",attributes:{currency:t,items:o,country:r,payment_profile_id:a,coupons:n?[{type:"coupon",name:"coupon",coupon_code:n}]:[],client_data:{},vat_override:s||void 0,...i&&{promotions:i}}}}},P=async e=>{let{country:t,couponCode:r,currency:o,orderItems:n=[],selectedShadowsOption:s,paymentProfileId:i,vatNumber:d,configs:l={},license:c=u.sU,debitableIdentifier:m,promotions:y,isEligibleForUnlimitedBogoPromotion:C=!1,isClickToCancelARGateEnabled:g=!1,isFootageSelect:v=!1}=e,P=w({orderItems:n,license:c,country:t,debitableIdentifier:m,selectedShadowsOption:s,isClickToCancelARGateEnabled:g});C&&(P=p(P,v));let O=(0,a._u)().formattedUrl,_=k({country:t,couponCode:r,promotions:C?h():y,currency:o,items:P,paymentProfileId:i,vatNumber:d});return b.Bn.post(O,_,{...l,...N&&{timeout:3e4}}).then(e=>({headers:e.headers,data:(0,f.A)(e.data)}))},O=e=>{let{orderItems:t=[],country:r="",debitableIdentifier:a}=e;return t.map(e=>{let{product:{id:t,license:s,name:i="",productType:l,eligibleForRebilling:c,seatCount:p}={},assets:m,paymentMethod:y}=e,h={...p&&{seat_count:p},...y?.type!==o.gU&&{subscription_id:y?.id}},b=[];return m?.length&&(b=m.map(e=>{let{asset:t,selectedAssetSize:r}=e,a=(0,C.OJ)(t);return{type:(0,C._$)(t),id:t.id,license:s,...a&&{format:d.mx,size:d.mx,headline:t.title},...r?.size&&{size:r.size},...r?.format&&{format:r.format}}})),h.auto_renewal=c&&l===u.PZ&&!n.F7K.includes(r)&&!n.KGB.includes(i),h.debitable_identifier=a,{product:{id:t,type:l||u.Uy},...b&&{media:b},...Object.keys(h).length>0&&{meta:h}}})},_=async e=>{let{country:t,currency:r,orderItems:o,paymentProfileId:n,vatNumber:s,configs:i={},debitableIdentifier:d,promotions:l}=e,u=O({orderItems:o,country:t,debitableIdentifier:d}),c=(0,a._u)().formattedUrl,p=k({country:t,currency:r,items:u,paymentProfileId:n,vatNumber:s,promotions:l}),m=await b.Bn.post(c,p,{...i,...N&&{timeout:3e4}});return{headers:m.headers,data:(0,f.A)(m.data)}}}}]);
//# sourceMappingURL=BuyAndDownloadButton.3e0373a05ac3255b.js.map